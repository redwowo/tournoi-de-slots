<!DOCTYPE html>
<html lang="fr" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournoi 16 joueurs - Suivi des √©liminations</title>
    <link rel="icon" type="image/png" href="fly.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Theme toggle button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Changer de th√®me">üåì</button>

    <!-- Titre -->
    <h1>
        <img src="./sept.png" alt="Slot Machine" width="32" height="32">
        Tournoi de Slots
        <img src="./sept.png" alt="Slot Machine" width="32" height="32">
    </h1>

    <!-- Conteneur principal -->
    <div class="main-container">

        <!-- Sidebar gauche -->
        <div class="sidebar">
            <h3>üë• Participants :</h3>
            <ul id="playersDisplay"></ul>
            
            <div class="divider"></div>
            
            <div id="addPlayerContainer" class="input-container">
                <input type="text" id="playerName" placeholder="‚úçÔ∏è Nom de la machine">
		<div class="suggestions-container" id="suggestionsList"></div>
                <button id="addPlayerBtn" onclick="addPlayer()" class="btn-add">
                    <span class="add-icon">
    			<img src="./slot.png" 
         		alt="Slot Machine" width="20" height="20">
		    </span> 
		    Ajouter la Slot
                </button>
            </div>
            
            <p id="count">Slot ajout√©s : 0/16</p>
            
            <button id="randomSlotBtn" onclick="showRandomSlotDialog()" class="btn-outline" style="width: 100%; margin-bottom: 1rem;">
                <span class="shuffle-icon">
    		<img src="./de.png" 
         	alt="D√©" class="dice-icon">
		</span> 
		Choisir une slot al√©atoire
            </button>
            
            <!-- Rempla√ßons le bouton de tirage pour s'assurer qu'il fonctionne correctement -->
            <button id="launchDraw" onclick="launchDraw()" style="display: none; width: 100%;">
                <span class="shuffle-icon">
                    <img src="./de.png" 
                     alt="D√©" class="dice-icon">
                </span> 
                Lancer le tirage
            </button>
            
            <button id="resetButton" onclick="showResetConfirmDialog()" class="btn-outline" style="display: none; width: 100%; margin-top: 1rem;">
                R√©initialiser le tournoi
            </button>
            
            <!-- Bouton d'historique des √©liminations -->
            <button id="eliminationHistoryBtn" onclick="showEliminationHistory()" class="btn-outline" style="display: none; width: 100%; margin-top: 1rem;">
                <span style="margin-right: 0.5rem;">üìã</span> Historique des √©liminations
            </button>
            
            <!-- Bouton pour effacer toutes les donn√©es -->
            <button id="clearDataBtn" onclick="showConfirmDialog('Effacer toutes les donn√©es', '√ätes-vous s√ªr de vouloir effacer toutes les donn√©es ? Cette action est irr√©versible.', clearAllData)" class="btn-outline" style="width: 100%; margin-top: 1rem;">
                <img src="./poubelle.png" alt="Poubelle" width="16" height="16" style="margin-right: 0.5rem;"> Effacer toutes les donn√©es
            </button>
            
            <!-- Bouton pour afficher les r√©sultats des tournois pr√©c√©dents -->
            <button id="showPreviousWinnersBtn" onclick="toggleWinnersPanel()" class="previous-winners-btn">
                <span class="trophy-icon">üèÜ</span> R√©sultats tournois pr√©c√©dents
            </button>
        </div>

        <!-- Tableau de tournoi √† droite -->
        <div class="bracket" id="bracket" style="display: none;"></div>
    </div>

    <!-- Overlay et message de victoire -->
    <div id="overlay"></div>
    <div id="victoryMessage">
        <span class="trophy-icon">üèÜ</span>
        <p id="winnerText"></p>
        <button onclick="closeVictoryMessage()" style="margin-top: 1rem;">Fermer</button>
    </div>
    
    <!-- Loading overlay -->
    <div id="loadingOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--overlay-bg); z-index: 9999; justify-content: center; align-items: center; flex-direction: column;">
        <img src="chargement.svg" alt="Chargement" style="width: 100px; height: 100px; margin-bottom: 20px;">
        <p id="loadingText" style="color: white; font-size: 1.2rem; font-weight: bold; text-align: center;">Pr√©paration du tournoi en cours...</p>
        <div style="width: 250px; height: 10px; background-color: rgba(255,255,255,0.2); border-radius: 5px; margin-top: 15px; overflow: hidden;">
            <div id="loadingProgress" style="width: 0%; height: 100%; background-color: var(--primary-color); border-radius: 5px; transition: width 2s linear;"></div>
        </div>
    </div>
    
    <!-- Toast container -->
    <div class="toast-container" id="toastContainer"></div>
    
    <!-- Confirmation dialog -->
    <div class="confirm-dialog" id="confirmDialog">
        <div class="confirm-dialog-title" id="confirmDialogTitle"></div>
        <div class="confirm-dialog-message" id="confirmDialogMessage"></div>
        <div class="confirm-dialog-buttons">
            <button class="btn-outline" onclick="closeConfirmDialog()">Annuler</button>
            <button class="btn-danger" id="confirmDialogConfirmBtn">Confirmer</button>
        </div>
    </div>
    
    <!-- Reset dialog -->
    <div class="reset-dialog" id="resetDialog">
        <div class="reset-dialog-title">R√©initialiser le tournoi</div>
        <div class="reset-dialog-message">Comment souhaitez-vous r√©initialiser le tournoi ?</div>
        <div class="reset-dialog-buttons">
            <button onclick="resetTournamentWithOption(true)">Conserver la liste des joueurs</button>
            <button class="btn-danger" onclick="resetTournamentWithOption(false)">Tout r√©initialiser</button>
            <button class="btn-outline" onclick="closeResetDialog()">Annuler</button>
        </div>
    </div>
    
    <!-- Modal d'historique des √©liminations -->
    <div class="modal" id="eliminationHistoryModal">
        <div class="modal-overlay" onclick="closeEliminationHistory()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Historique des √©liminations</div>
                <div class="modal-description">Liste chronologique des joueurs √©limin√©s durant le tournoi</div>
            </div>
            <div class="modal-body">
                <ul class="elimination-list" id="eliminationList"></ul>
            </div>
            <div class="modal-footer">
                <button onclick="closeEliminationHistory()">Fermer</button>
            </div>
        </div>
    </div>
    
    <!-- Modal des gagnants pr√©c√©dents -->
    <div class="winners-modal" id="winnersPanel">
        <div class="winners-modal-overlay" onclick="toggleWinnersPanel()"></div>
        <div class="winners-modal-content">
            <div class="winners-modal-header">
                <div>
                    <div class="winners-modal-title">
                        <span class="trophy-icon">üèÜ</span> Anciens Gagnants
                    </div>
                    <div class="winners-modal-description">Palmar√®s des vainqueurs des tournois pr√©c√©dents</div>
                </div>
            </div>
            <div class="winners-modal-body">
                <ul class="winners-list" id="winnersList">
                    <li class="no-winners">Aucun gagnant enregistr√©</li>
                </ul>
            </div>
            <div class="winners-modal-footer">
                <button onclick="toggleWinnersPanel()">Fermer</button>
            </div>
        </div>
    </div>
    
    <!-- Confirmation d'annulation de match -->
    <div class="undo-confirm-dialog" id="undoConfirmDialog">
        <div class="undo-confirm-title">
            <span>‚ö†Ô∏è</span> Annuler le r√©sultat du match
        </div>
        <div class="undo-confirm-message" id="undoConfirmMessage">
            √ätes-vous s√ªr de vouloir annuler le r√©sultat de ce match ? Cette action peut avoir des cons√©quences sur les tours suivants.
        </div>
        <div class="undo-confirm-buttons">
            <button class="btn-outline" onclick="closeUndoConfirmDialog()">Annuler</button>
            <button class="btn-warning" id="undoConfirmBtn" onclick="undoMatch()">Confirmer l'annulation</button>
        </div>
    </div>
    
    <!-- Modal am√©lior√© de s√©lection al√©atoire de slot -->
    <div class="random-slot-dialog" id="randomSlotDialog">
        <div class="random-slot-header">
            <div class="random-slot-title">
                <img src="./de.png" alt="D√©" class="random-slot-title-icon">
                S√©lection al√©atoire de machine
            </div>
            <button class="random-slot-close" onclick="closeRandomSlotDialog()">
                <img src="./croix.png" alt="Fermer" width="16" height="16">
            </button>
        </div>
        
        <div class="random-slot-content">
            <div class="random-slot-description">
                S√©lectionnez le type de machine √† sous que vous souhaitez choisir al√©atoirement.
            </div>
            
            <div class="slot-type-selection" id="slotTypeSelection">
                <div class="slot-type-option selected" data-value="all" onclick="selectSlotType(this, 'all')">
                    <div class="slot-type-radio"></div>
                    <div class="slot-type-label">
                        <span class="slot-type-name">Toutes les machines</span>
                    </div>
                </div>
                
                <div class="slot-type-option" data-value="hacksaw" onclick="selectSlotType(this, 'hacksaw')">
                    <div class="slot-type-radio"></div>
                    <div class="slot-type-label">
                        <span class="slot-type-name">Uniquement Hacksaw Gaming</span>
                        <span class="slot-type-badge hacksaw">Hacksaw</span>
                    </div>
                </div>
                
                <div class="slot-type-option" data-value="nolimit" onclick="selectSlotType(this, 'nolimit')">
                    <div class="slot-type-radio"></div>
                    <div class="slot-type-label">
                        <span class="slot-type-name">Uniquement Nolimit City</span>
                        <span class="slot-type-badge nolimit">Nolimit</span>
                    </div>
                </div>
                
                <div class="slot-type-option" data-value="pragmatic" onclick="selectSlotType(this, 'pragmatic')">
                    <div class="slot-type-radio"></div>
                    <div class="slot-type-label">
                        <span class="slot-type-name">Uniquement Pragmatic Play</span>
                        <span class="slot-type-badge pragmatic">Pragmatic</span>
                    </div>
                </div>
            </div>
            
            <!-- S√©lecteur de nombre de machines -->
            <div class="number-selection" style="margin: 1.5rem 0;">
                <label for="slotCount" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Nombre de machines √† s√©lectionner (max 16):</label>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="number" id="slotCount" min="1" max="16" value="1" style="width: 80px; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 0.5rem; background-color: var(--card-bg); color: var(--text-color);" oninput="validateSlotCount(this)">
                    <span style="color: var(--muted-text); font-size: 0.9rem;">Maximum: <span id="maxAvailable">0</span> machines disponibles</span>
                </div>
            </div>
            
            <div class="slot-selecting" id="slotSelecting" style="display: none;">
                <!-- Les √©l√©ments seront ajout√©s dynamiquement pendant l'animation -->
            </div>
            
            <div class="random-slot-result" id="randomSlotResult">
                <img src="./slot.png" alt="Slot Machine" class="random-slot-icon">
                <div class="random-slot-name" id="randomSlotName"></div>
                <div class="random-slot-category" id="randomSlotCategory"></div>
            </div>
        </div>
        
        <div class="random-slot-footer">
            <button class="btn-outline" onclick="closeRandomSlotDialog()">Annuler</button>
            <div>
                <button class="btn-primary" id="selectRandomBtn" onclick="selectRandomSlot()">
                    <img src="./de.png" alt="D√©" width="16" height="16">
                    S√©lectionner al√©atoirement
                </button>
                <button class="btn-primary btn-add-slot" id="addRandomSlotBtn" onclick="addRandomSlot()">
                    <img src="./slot.png" alt="Slot Machine" width="16" height="16">
                    Ajouter cette machine
                </button>
            </div>
        </div>
    </div>

    <!-- Mention l√©gale -->
    <div class="legal-notice">
        Site cr√©√© avec IA.<br>Appartenant √† Redwo.<br>Patouche Lamouche Inc.
    </div>

    <!-- Scripts -->
    <script src="tournament-app.js"></script>
</body>
</html>

